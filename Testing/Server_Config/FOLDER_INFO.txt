================================================================================
FOLDER: Server_Config_Testing
================================================================================

Purpose: Update SRT-MGATE-1210 gateway server configuration via BLE

This folder contains a complete, ready-to-run Python program for configuring
your gateway's network and telemetry settings through Bluetooth Low Energy.

================================================================================
FOLDER CONTENTS
================================================================================

üìÑ 00_START_HERE.txt
   ‚Üí Quick reference - Read this first!
   ‚Üí 3-step quick start guide
   ‚Üí File overview

üìÑ QUICK_START.txt
   ‚Üí Detailed step-by-step instructions
   ‚Üí What the configuration does
   ‚Üí Testing procedures
   ‚Üí Troubleshooting guide

üìÑ CONFIG_REFERENCE.md
   ‚Üí Complete configuration documentation
   ‚Üí All available settings explained
   ‚Üí Modification examples
   ‚Üí API v2.2.0 reference

üìÑ requirements.txt
   ‚Üí Python dependencies (bleak)
   ‚Üí Install with: pip install -r requirements.txt

üêç update_server_config.py
   ‚Üí Main executable program
   ‚Üí Pre-configured with your settings
   ‚Üí Just run: python update_server_config.py

================================================================================
CONFIGURATION APPLIED BY THIS PROGRAM
================================================================================

Network:
  ‚Ä¢ Mode: Ethernet (Primary)
  ‚Ä¢ Ethernet: DHCP (Automatic IP)
  ‚Ä¢ WiFi: Enabled (SSID: KOWI, Password: @Kremi201)

Telemetry:
  ‚Ä¢ MQTT: Enabled
    - Broker: broker.hivemq.com:1883
    - Mode: Default (all registers in one topic)
    - Interval: 20 seconds
    - Topic: v1/devices/me/telemetry
  ‚Ä¢ HTTP: Disabled

================================================================================
HOW TO USE
================================================================================

1. Install dependencies:
   pip install bleak

2. Make sure gateway is:
   ‚Ä¢ Powered on
   ‚Ä¢ In BLE Development Mode
   ‚Ä¢ Within Bluetooth range

3. Run the program:
   python update_server_config.py

4. Wait for:
   ‚Ä¢ BLE connection
   ‚Ä¢ Configuration upload
   ‚Ä¢ Automatic device restart (~10 seconds)

5. Verify:
   ‚Ä¢ Ethernet connection established
   ‚Ä¢ MQTT data flowing every 20 seconds

================================================================================
CUSTOMIZATION
================================================================================

To modify the configuration:
1. Open update_server_config.py in a text editor
2. Find the "server_config" dictionary (line ~195)
3. Modify the values as needed
4. See CONFIG_REFERENCE.md for all options
5. Save and run again

Common changes:
‚Ä¢ WiFi credentials ‚Üí "ssid" and "password" fields
‚Ä¢ MQTT interval ‚Üí "interval" field in default_mode
‚Ä¢ Static IP ‚Üí set "use_dhcp" to false, fill IP fields
‚Ä¢ Enable HTTP ‚Üí set "protocol" to "http" or "both"

================================================================================
IMPORTANT NOTES
================================================================================

‚ö†Ô∏è  Device ALWAYS restarts after server_config update
    ‚Ä¢ This is normal firmware behavior
    ‚Ä¢ Wait ~10 seconds for reboot to complete
    ‚Ä¢ All configuration is saved to flash memory

‚ö†Ô∏è  All previous server config is replaced
    ‚Ä¢ Any existing MQTT/HTTP settings will be overwritten
    ‚Ä¢ Make sure your configuration is correct before running

‚úÖ  Configuration persists across power cycles
    ‚Ä¢ Saved permanently to device flash memory
    ‚Ä¢ No need to reconfigure after power loss

‚úÖ  Can be run multiple times
    ‚Ä¢ Safe to execute repeatedly
    ‚Ä¢ Each run applies the same configuration

================================================================================
RELATED FOLDERS
================================================================================

../Device_Testing/
  ‚Üí Programs for creating devices and registers
  ‚Üí 5, 10, 15, 20... register configurations

../Modbus_Slave_Simulator/
  ‚Üí Modbus TCP slave simulator for testing
  ‚Üí Simulates 5 registers without physical hardware

../Docs/
  ‚Üí API.md - Complete API reference
  ‚Üí MQTT_PUBLISH_MODES_DOCUMENTATION.md
  ‚Üí Network configuration guides

../Main/
  ‚Üí Actual firmware source code

================================================================================
TESTING WORKFLOW
================================================================================

Typical testing sequence:

1. Run this program (update_server_config.py)
   ‚Üí Configure network and MQTT settings

2. Wait for device restart (~10 seconds)
   ‚Üí Device connects to network via Ethernet
   ‚Üí MQTT connection established

3. Run device creation program
   ‚Üí ../Device_Testing/create_device_5_registers.py
   ‚Üí Creates Modbus TCP device + 5 registers

4. Run Modbus slave simulator (optional)
   ‚Üí ../Modbus_Slave_Simulator/modbus_slave_5_registers.py
   ‚Üí Simulates register values for testing

5. Verify MQTT data
   ‚Üí Subscribe to: v1/devices/me/telemetry
   ‚Üí Should see data every 20 seconds

================================================================================
TROUBLESHOOTING
================================================================================

See QUICK_START.txt for detailed troubleshooting.

Quick fixes:

"SURIOTA GW not found"
  ‚Üí Check gateway power and BLE mode
  ‚Üí Move closer (within 5 meters)
  ‚Üí Enable Bluetooth on your computer

"Configuration update failed"
  ‚Üí Check payload in program matches API.md
  ‚Üí Verify all required fields are present
  ‚Üí Try disconnecting and reconnecting

"Device not restarting"
  ‚Üí Wait 15 seconds total
  ‚Üí Manually power cycle if needed
  ‚Üí Check serial logs if available

"MQTT not working"
  ‚Üí Verify Ethernet cable connected
  ‚Üí Check internet connectivity
  ‚Üí Ping broker.hivemq.com
  ‚Üí Verify topic subscription

================================================================================
SUPPORT & REFERENCES
================================================================================

Documentation:
  ‚Ä¢ API.md - Complete API documentation
  ‚Ä¢ CONFIG_REFERENCE.md - This folder's config guide
  ‚Ä¢ QUICK_START.txt - Detailed instructions

Contact:
  ‚Ä¢ SURIOTA R&D Team
  ‚Ä¢ Email: support@suriota.com

Firmware Version: 2.2.0
Created: 2025-11-15
Author: Kemal

================================================================================
