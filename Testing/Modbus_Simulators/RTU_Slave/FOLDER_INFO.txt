===============================================================================
  MODBUS RTU SIMULATORS FOLDER
  SRT-MGATE-1210 Firmware Testing Tools
===============================================================================

FOLDER:      Testing/Modbus_Simulators/RTU/
PURPOSE:     Modbus RTU Slave Simulators for testing SRT-MGATE-1210 Gateway
PROTOCOL:    Modbus RTU (Serial RS-485/RS-232)
CREATED:     2025-11-17
AUTHOR:      Kemal - SURIOTA R&D Team

===============================================================================
  FOLDER CONTENTS
===============================================================================

ğŸ“„ 00_START_HERE.txt
   Quick navigation guide and overview
   â†’ Read this first to understand folder structure

ğŸ“„ QUICK_START.txt
   Quick setup and run guide (5 minutes)
   â†’ For users who want to start immediately

ğŸ“„ README.md
   Complete documentation with examples
   â†’ Detailed installation, configuration, troubleshooting
   â†’ Hardware setup diagrams
   â†’ Testing workflows

ğŸ“„ requirements.txt
   Python package dependencies
   â†’ pymodbus >= 2.5.0
   â†’ pyserial >= 3.5
   â†’ Install: pip install -r requirements.txt

ğŸ“„ FOLDER_INFO.txt (This file)
   Folder contents and structure explanation

ğŸ modbus_slave_5_registers.py
   Main Modbus RTU Slave Simulator
   â†’ 5 Input Registers (Temperature, Humidity, Pressure, Voltage, Current)
   â†’ Slave ID: 1
   â†’ Serial: COM8, 9600, 8N1
   â†’ Auto-updating values every 5 seconds
   â†’ Compatible with pymodbus 2.x and 3.x


===============================================================================
  AVAILABLE SIMULATORS
===============================================================================

Currently implemented:

âœ“ modbus_slave_5_registers.py
  - 5 Input Registers (INT16)
  - Addresses: 0-4
  - Function Code: 4 (Read Input Registers)
  - Auto-update simulation
  - Matches: Device_Testing/RTU/create_device_5_registers.py


Future simulators (planned):

â³ modbus_slave_10_registers.py  (10 Input Registers)
â³ modbus_slave_20_registers.py  (20 Mixed Registers)
â³ modbus_slave_coils.py         (Digital I/O simulation)


===============================================================================
  COMPARISON WITH TCP SIMULATORS
===============================================================================

RTU Simulators (This folder):
â”œâ”€ Protocol:      Modbus RTU
â”œâ”€ Medium:        Serial (RS-485/RS-232)
â”œâ”€ Port:          COM8 (or /dev/ttyUSB0)
â”œâ”€ Framing:       RTU binary with CRC16
â”œâ”€ Speed:         9600 baud default
â””â”€ Hardware:      USB-to-RS485 adapter required

TCP Simulators (../TCP/):
â”œâ”€ Protocol:      Modbus TCP
â”œâ”€ Medium:        Ethernet/WiFi
â”œâ”€ Port:          192.168.1.8:502
â”œâ”€ Framing:       TCP packets
â”œâ”€ Speed:         Network speed (Mbps)
â””â”€ Hardware:      Network connection only


===============================================================================
  MATCHING DEVICE_TESTING PROGRAMS
===============================================================================

This RTU simulator is designed to work with:

Device_Testing/RTU/create_device_5_registers.py
â”œâ”€ Creates RTU device on gateway via BLE
â”œâ”€ Configures Serial Port 2 (COM8 equivalent)
â”œâ”€ Sets baud: 9600, format: 8N1
â”œâ”€ Registers 5 Input Registers (addresses 0-4)
â””â”€ Enables polling every 2 seconds


===============================================================================
  HARDWARE REQUIREMENTS
===============================================================================

Required Hardware:
âœ“ PC/Laptop with available USB port
âœ“ USB-to-RS485 adapter (FTDI, CH340, CP2102, etc.)
âœ“ SRT-MGATE-1210 Gateway with Serial2 exposed
âœ“ RS485 cable or wires (A+/A+, B-/B- connection)

Optional Hardware:
â—‹ Logic analyzer for debugging communication
â—‹ USB-to-TTL for gateway serial monitoring


===============================================================================
  SOFTWARE REQUIREMENTS
===============================================================================

Python Environment:
âœ“ Python 3.7+ (tested up to 3.13)
âœ“ pip package manager

Python Packages:
âœ“ pymodbus >= 2.5.0 (Modbus protocol library)
âœ“ pyserial >= 3.5   (Serial port communication)

Operating System:
âœ“ Windows 10/11 (COM ports)
âœ“ Linux (e.g., Ubuntu, Raspberry Pi OS)
âœ“ macOS (with USB-to-serial driver)


===============================================================================
  USAGE WORKFLOW
===============================================================================

Standard Testing Procedure:

1. Hardware Setup
   â”œâ”€ Connect USB-to-RS485 adapter to PC
   â”œâ”€ Wire adapter to gateway Serial2 (A+/B-, GND)
   â””â”€ Power on gateway

2. Software Setup
   â”œâ”€ Install Python dependencies
   â”œâ”€ Verify COM port (Device Manager on Windows)
   â””â”€ Configure port in script if needed

3. Run Simulator
   â”œâ”€ python modbus_slave_5_registers.py
   â”œâ”€ Press Enter to start server
   â””â”€ Simulator listens on COM8

4. Configure Gateway
   â”œâ”€ Run create_device_5_registers.py
   â”œâ”€ Device created via BLE
   â””â”€ Gateway starts polling every 2s

5. Monitor & Verify
   â”œâ”€ Simulator displays incoming requests
   â”œâ”€ Gateway logs show RTU polling
   â””â”€ Data transmitted to MQTT/HTTP


===============================================================================
  TECHNICAL DETAILS
===============================================================================

Modbus RTU Frame Format:
  [Slave ID] [Function] [Address] [Count/Data] [CRC16]
  Example: 01 04 00 00 00 05 [CRC]
  â†’ Read 5 Input Registers from address 0

Gateway Firmware Integration:
  â”œâ”€ ModbusRtuService.cpp handles RTU communication
  â”œâ”€ Serial2 (RX=17, TX=18) used for RS485
  â”œâ”€ ModbusMaster library for client implementation
  â”œâ”€ Configurable baud rate, parity, stop bits
  â””â”€ Exponential backoff retry on failure

Simulator Features:
  â”œâ”€ Thread-safe register updates
  â”œâ”€ Auto-detection of pymodbus version (2.x/3.x)
  â”œâ”€ Realistic sensor value simulation
  â”œâ”€ Comprehensive error handling
  â”œâ”€ Serial port auto-discovery
  â””â”€ Graceful shutdown on Ctrl+C


===============================================================================
  TROUBLESHOOTING REFERENCE
===============================================================================

Common Issues:

âŒ "Could not open port COM8"
   â†’ Close other programs using COM8
   â†’ Check Device Manager for correct port
   â†’ Run as Administrator
   â†’ Reconnect USB adapter

âŒ "pymodbus not installed"
   â†’ pip install pymodbus pyserial

âŒ "No data received by gateway"
   â†’ Check RS485 wiring (A+â†”A+, B-â†”B-)
   â†’ Verify baud rate matches (9600)
   â†’ Confirm Slave ID matches (1)
   â†’ Test with Modbus Poll software

âŒ "Import error: No module named serial"
   â†’ pip install pyserial


===============================================================================
  FILE MAINTENANCE
===============================================================================

Versioning:
  v1.0.0 - Initial release (2025-11-17)
  â””â”€ modbus_slave_5_registers.py

Update History:
  2025-11-17: Initial creation of RTU simulator folder
              - Created 5-register simulator
              - Added comprehensive documentation
              - Tested with pymodbus 2.5.3 and pyserial 3.5


===============================================================================
  RELATED FOLDERS
===============================================================================

../TCP/                          - Modbus TCP simulators
../../Device_Testing/RTU/        - RTU device creation scripts
../../Device_Testing/TCP/        - TCP device creation scripts
../../../Main/                   - SRT-MGATE-1210 firmware source


===============================================================================
  SUPPORT & CONTACT
===============================================================================

For technical support:
  1. Check QUICK_START.txt for common solutions
  2. Read README.md for detailed documentation
  3. Review TROUBLESHOOTING section
  4. Contact: Kemal - SURIOTA R&D Team

Documentation:
  - Gateway API: See Documentation/API.md
  - Firmware: See Main/*.cpp source files
  - Testing: See Device_Testing/*/README.md


===============================================================================
  LICENSE & COPYRIGHT
===============================================================================

Part of SRT-MGATE-1210 Firmware Testing Suite
Copyright Â© 2025 SURIOTA R&D Team
All rights reserved.


===============================================================================

Last updated: 2025-11-17
Author: Kemal - SURIOTA R&D Team
Version: 1.0.0

===============================================================================
